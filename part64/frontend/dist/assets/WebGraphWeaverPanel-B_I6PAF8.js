import{r as c,j as s}from"./index-DKUSIun3.js";const ke=220,ve=1300,Ne=2400,Pe=33,Ae=50;function me(n){const i=new Set,u=[];for(const p of n){const b=p.trim();!b||i.has(b)||(i.add(b),u.push(b))}return u}function ue(){if(typeof window>"u")return["http://127.0.0.1:8793"];const n=window.location.protocol==="https:"?"https":"http",i=window.location.hostname||"127.0.0.1";return me(["",`${n}://${i}:8793`,`${n}://127.0.0.1:8793`,`${n}://localhost:8793`])}function We(n){const i=new URL(n);return i.protocol=i.protocol==="https:"?"wss:":"ws:",i.pathname="/ws",i.search="",i.hash="",i.toString()}function Fe(){return me(ue().map(n=>We(n)))}function ne(n){const i=n.toLowerCase();return i.includes("networkerror")||i.includes("failed to fetch")||i.includes("unreachable")||i.includes("status request failed")||i.includes("events request failed")||i.includes("graph request failed")?`${n} If Web Graph Weaver is not running, start it in part64 code with 'npm run weaver' or run 'python -m code.world_pm2 start'.`:n}function he(n){let i=0;for(let u=0;u<n.length;u+=1)i=Math.imul(31,i)+n.charCodeAt(u),i|=0;return Math.abs(i)}function je(n){return`hsl(${he(n||"domain")%360}, 76%, 62%)`}function Xe(n){if(n.kind==="domain")return n.domain||n.label;if(n.kind==="content")return String(n.content_type||n.label);if(n.title&&n.title.trim().length>0)return n.title.slice(0,42);const i=String(n.url||n.label||""),u=i.split("/"),p=u[u.length-1]||u[u.length-2]||i;return p.length<=36?p:`${p.slice(0,33)}...`}function Ye(n,i=92){const u=n.trim();return u.length<=i?u:`${u.slice(0,Math.max(8,i-3))}...`}function qe(n){return String(n.url||n.domain||n.reason||"-")}function ye(n,i){if(n.length<=i)return n;const u=Math.ceil(n.length/i),p=[];for(let b=0;b<n.length&&(p.push(n[b]),!(p.length>=i));b+=u);return p}function Ge(n,i=[],u=[]){const p=new Map(n.nodes.map(g=>[g.id,g])),b=new Map(n.edges.map(g=>[g.id,g]));for(const g of i)p.set(g.id,g);for(const g of u)b.set(g.id,g);return{...n,nodes:[...p.values()],edges:[...b.values()],counts:{nodes_total:p.size,edges_total:b.size,url_nodes_total:[...p.values()].filter(g=>g.kind==="url").length}}}function Ve(n){return c.useMemo(()=>{const i=new Map,u=n.filter(k=>k.kind==="domain"),p=n.filter(k=>k.kind==="url"),b=n.filter(k=>k.kind==="content"),g=new Map,h=Math.max(1,u.length),T=280;u.forEach((k,S)=>{const R=Math.PI*2*S/h,j=Math.cos(R)*T,$=Math.sin(R)*T*.74;i.set(k.id,{x:j,y:$}),k.domain&&g.set(k.domain,{x:j,y:$})});const M=new Map;p.forEach(k=>{const S=k.domain||"unknown",R=g.get(S)||{x:0,y:0},j=M.get(S)||0,$=Number(k.depth||0),Q=j*.72+he(k.id)%628/100,P=30+$*28+j%9*11,ae=R.x+Math.cos(Q)*P,z=R.y+Math.sin(Q)*P*.82;i.set(k.id,{x:ae,y:z}),M.set(S,j+1)});const B=Math.max(1,b.length);return b.forEach((k,S)=>{const R=-220+S*440/Math.max(1,B-1),j=320+S%2*26;i.set(k.id,{x:R,y:j})}),i},[n])}function Ue(){const n=c.useRef(null),i=c.useRef({active:!1,startX:0,startY:0,baseOffsetX:0,baseOffsetY:0}),u=c.useRef(0),p=c.useRef(null),b=c.useRef(0),g=c.useRef(null),[h,T]=c.useState(null),[M,B]=c.useState({nodes:[],edges:[]}),[k,S]=c.useState([]),[R,j]=c.useState("connecting"),[$,Q]=c.useState("https://example.com/"),[P,ae]=c.useState(3),[z,Se]=c.useState(2500),[ie,Ee]=c.useState(2),[ce,fe]=c.useState(""),[O,Me]=c.useState(""),[pe,A]=c.useState(null),[re,_e]=c.useState(()=>ue()[0]||"http://127.0.0.1:8793"),[y,Ce]=c.useState(null),[W,Re]=c.useState(1),[U,Oe]=c.useState(0),[H,$e]=c.useState(0),N=c.useMemo(()=>{if(!O)return M;const t=new Set(M.nodes.filter(e=>e.domain===O||e.kind==="domain"&&e.domain===O).map(e=>e.id));for(const e of M.edges)(t.has(e.source)||t.has(e.target))&&(t.add(e.source),t.add(e.target));return{nodes:M.nodes.filter(e=>t.has(e.id)),edges:M.edges.filter(e=>t.has(e.source)&&t.has(e.target)),counts:M.counts}},[O,M]),w=c.useMemo(()=>{if(!(N.nodes.length>ve||N.edges.length>Ne))return{nodes:N.nodes,edges:N.edges,sampledNodes:!1,sampledEdges:!1};const e=new Map(N.nodes.map(a=>[a.id,a])),o=y?N.edges.filter(a=>a.source===y||a.target===y):[],d=new Map;for(const a of ye(N.edges,Ne))d.set(a.id,a);for(const a of o)d.set(a.id,a);const r=new Map;for(const a of ye(N.nodes,ve))r.set(a.id,a);if(y){const a=e.get(y);a&&r.set(a.id,a)}for(const a of d.values()){const x=e.get(a.source);x&&r.set(x.id,x);const f=e.get(a.target);f&&r.set(f.id,f)}const m=[...d.values()].filter(a=>r.has(a.source)&&r.has(a.target));return{nodes:[...r.values()],edges:m,sampledNodes:r.size<N.nodes.length,sampledEdges:m.length<N.edges.length}},[y,N.edges,N.nodes]),F=Ve(w.nodes),Z=c.useCallback(t=>{S(e=>{const o=[...e,t];return o.length>ke&&o.splice(0,o.length-ke),o})},[]),X=c.useCallback(t=>{const e=ne(t instanceof Error?t.message:String(t));A(e)},[]),_=c.useCallback(async(t,e)=>{const o=me([re,...ue()]);let d=null;for(const m of o)try{const a=await fetch(`${m}${t}`,e);if(a.status===404||a.status===502||a.status===503){d=new Error(`HTTP ${a.status} from ${m}`);continue}return _e(m),a}catch(a){d=a}const r=d instanceof Error?d.message:"unknown network error";throw new Error(ne(`Web Graph Weaver unreachable (${r})`))},[re]),Y=c.useCallback(async()=>{const t=await _("/api/weaver/status");if(!t.ok)throw new Error(`status request failed (${t.status})`);const e=await t.json();T(e)},[_]),ee=c.useCallback(async t=>{const e=new URLSearchParams;t&&e.set("domain",t),e.set("node_limit","12000"),e.set("edge_limit","26000");const o=e.toString(),d=await _(`/api/weaver/graph${o?`?${o}`:""}`);if(!d.ok)throw new Error(`graph request failed (${d.status})`);const r=await d.json();B(r.graph||{nodes:[],edges:[]})},[_]),ge=c.useCallback(async()=>{const t=await _("/api/weaver/events?limit=120");if(!t.ok)throw new Error(`events request failed (${t.status})`);const e=await t.json();S(Array.isArray(e.events)?e.events:[])},[_]),oe=c.useCallback(async()=>{A(null),await Promise.all([Y(),ee(O),ge()])},[O,ge,ee,Y]),te=c.useCallback(async t=>{A(null);const e=$.split(/[\n,]/).map(r=>r.trim()).filter(r=>r.length>0),o=await _("/api/weaver/control",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:t,seeds:e,max_depth:P,max_nodes:z,concurrency:ie})}),d=await o.json();if(!o.ok||d?.ok!==!0)throw new Error(d?.error||`control action failed (${o.status})`);d.status&&T(d.status),Z({event:"crawl_state",timestamp:Date.now(),reason:t})},[Z,ie,P,z,_,$]),De=c.useCallback(async()=>{const t=ce.trim();if(!t)return;A(null);const e=await _("/api/weaver/opt-out",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:t})}),o=await e.json();if(!e.ok||o?.ok!==!0)throw new Error(o?.error||`opt-out request failed (${e.status})`);fe(""),await Y()},[ce,Y,_]);c.useEffect(()=>{oe().catch(t=>{const e=ne(t instanceof Error?t.message:String(t));A(e),j("offline")})},[oe]),c.useEffect(()=>{let t=!1;const e=()=>{if(t)return;j("connecting");const o=Fe();if(o.length===0){j("offline");return}const d=o[b.current%o.length],r=new WebSocket(d);g.current=r,r.onopen=()=>{t||(b.current=0,j("online"))},r.onmessage=m=>{if(!t)try{const a=JSON.parse(String(m.data));if(a.event==="snapshot"){a.status&&T(a.status),a.graph&&B(a.graph),Array.isArray(a.recent_events)&&S(a.recent_events);return}a.event==="graph_delta"&&B(f=>Ge(f,a.nodes||[],a.edges||[])),Z(a);const x=Date.now();x-u.current>900&&(u.current=x,Y().catch(()=>{}))}catch{}},r.onclose=()=>{t||(j("offline"),b.current+=1,p.current=window.setTimeout(e,2200))},r.onerror=()=>{r.close()}};return e(),()=>{t=!0,p.current!==null&&window.clearTimeout(p.current),g.current&&g.current.close()}},[Z,Y]),c.useEffect(()=>{ee(O).catch(t=>{const e=ne(t instanceof Error?t.message:String(t));A(e)})},[O,ee]),c.useEffect(()=>{const t=n.current;if(!t)return;const e=t.getContext("2d");if(!e)return;let o=0,d=0,r=0,m=0;const a=x=>{const f=w.sampledNodes||w.sampledEdges||w.edges.length>1800||w.nodes.length>1e3,le=f?Ae:Pe;if(x-m<le){o=window.requestAnimationFrame(a);return}m=x;const se=t.getBoundingClientRect(),J=window.devicePixelRatio||1,v=f?Math.min(J,1.2):Math.min(J,2),K=Math.max(1,Math.floor(se.width*v)),q=Math.max(1,Math.floor(se.height*v));(K!==d||q!==r)&&(d=K,r=q,t.width=d,t.height=r),e.clearRect(0,0,d,r),e.fillStyle="rgba(9, 16, 28, 0.96)",e.fillRect(0,0,d,r);const G=d/2+U*v,de=r/2+H*v,V=W*v,Le=new Map(w.nodes.map(l=>[l.id,l])),xe=new Set;if(y)for(const l of w.edges)(l.source===y||l.target===y)&&xe.add(l.id);e.save();for(const l of w.edges){const L=F.get(l.source),C=F.get(l.target);if(!L||!C)continue;const D=G+L.x*V,E=de+L.y*V,be=G+C.x*V,Te=de+C.y*V,I=xe.has(l.id),we=f?.5:.5+Math.sin(x/640+he(l.id)*3e-4)*.5;l.kind==="hyperlink"?(e.strokeStyle=I?`rgba(112, 232, 255, ${.58+we*.3})`:`rgba(90, 156, 206, ${.12+we*.14})`,e.lineWidth=I?1.2:.6,f?e.setLineDash([]):(e.setLineDash([5,7]),e.lineDashOffset=-(x/40))):l.kind==="canonical_redirect"?(e.strokeStyle=I?"rgba(252, 143, 255, 0.82)":"rgba(186, 100, 208, 0.35)",e.lineWidth=I?1.3:.7,f?e.setLineDash([]):(e.setLineDash([3,5]),e.lineDashOffset=x/30)):l.kind==="domain_membership"?(e.strokeStyle=I?"rgba(255, 205, 133, 0.84)":"rgba(214, 164, 93, 0.28)",e.lineWidth=I?1.2:.5,e.setLineDash([])):(e.strokeStyle=I?"rgba(164, 239, 158, 0.85)":"rgba(120, 186, 126, 0.26)",e.lineWidth=I?1:.45,f?e.setLineDash([]):(e.setLineDash([2,5]),e.lineDashOffset=-(x/45))),e.beginPath(),e.moveTo(D,E),e.lineTo(be,Te),e.stroke()}e.setLineDash([]),e.restore();for(const l of w.nodes){const L=F.get(l.id);if(!L)continue;const C=G+L.x*V,D=de+L.y*V;let E=f?1.8:2.4;l.kind==="domain"?E=f?6.8:8:l.kind==="content"?E=f?4.2:5.2:E=(f?1.9:2.6)+Number(l.depth||0)*.35,y===l.id&&(e.fillStyle="rgba(255, 244, 184, 0.95)",e.beginPath(),e.arc(C,D,E+4.5,0,Math.PI*2),e.fill()),l.kind==="domain"?e.fillStyle=je(String(l.domain||l.label)):l.kind==="content"?e.fillStyle="rgba(116, 216, 144, 0.95)":l.compliance==="robots_blocked"||l.status==="blocked"?e.fillStyle="rgba(255, 110, 110, 0.9)":e.fillStyle="rgba(129, 203, 255, 0.85)",l.kind==="content"?(e.beginPath(),e.moveTo(C,D-E),e.lineTo(C+E,D),e.lineTo(C,D+E),e.lineTo(C-E,D),e.closePath(),e.fill()):(e.beginPath(),e.arc(C,D,E,0,Math.PI*2),e.fill())}if(y){const l=Le.get(y);l&&(e.fillStyle="rgba(217, 233, 255, 0.95)",e.font=`${11*v}px ui-monospace, SFMono-Regular, Menlo, monospace`,e.textAlign="left",e.fillText(`${l.kind.toUpperCase()} :: ${Xe(l)}`,16*v,28*v))}e.fillStyle="rgba(172, 197, 227, 0.82)",e.font=`${10*v}px ui-monospace, SFMono-Regular, Menlo, monospace`,e.textAlign="left",e.fillText(`nodes ${w.nodes.length}/${N.nodes.length} / edges ${w.edges.length}/${N.edges.length} / zoom ${W.toFixed(2)}x`,16*v,(r/v-14)*v),(w.sampledNodes||w.sampledEdges)&&(e.fillStyle="rgba(255, 201, 132, 0.86)",e.fillText("dense graph mode: sampled render active",16*v,16*v)),o=window.requestAnimationFrame(a)};return o=window.requestAnimationFrame(a),()=>{window.cancelAnimationFrame(o)}},[F,w.edges,w.nodes,w.sampledEdges,w.sampledNodes,y,U,H,W,N.edges.length,N.nodes.length]),c.useEffect(()=>{const t=n.current;if(!t)return;const e=m=>{m.preventDefault();const a=m.deltaY<0?1.08:.92;Re(x=>Be(x*a,.35,3.4))},o=m=>{i.current={active:!0,startX:m.clientX,startY:m.clientY,baseOffsetX:U,baseOffsetY:H},t.setPointerCapture(m.pointerId)},d=m=>{if(!i.current.active)return;const a=m.clientX-i.current.startX,x=m.clientY-i.current.startY;Oe(i.current.baseOffsetX+a),$e(i.current.baseOffsetY+x)},r=m=>{const a=i.current.active;if(i.current.active=!1,t.releasePointerCapture(m.pointerId),!a)return;const x=t.getBoundingClientRect(),f=window.devicePixelRatio||1,le=((m.clientX-x.left)*f-t.width/2-U*f)/(W*f),se=((m.clientY-x.top)*f-t.height/2-H*f)/(W*f);let J=null,v=Number.POSITIVE_INFINITY;for(const K of w.nodes){const q=F.get(K.id);if(!q)continue;const G=Math.hypot(q.x-le,q.y-se);G<v&&(v=G,J=K.id)}v<=16&&Ce(J)};return t.addEventListener("wheel",e,{passive:!1}),t.addEventListener("pointerdown",o),t.addEventListener("pointermove",d),t.addEventListener("pointerup",r),()=>{t.removeEventListener("wheel",e),t.removeEventListener("pointerdown",o),t.removeEventListener("pointermove",d),t.removeEventListener("pointerup",r)}},[F,w.nodes,U,H,W]);const Ie=c.useMemo(()=>Object.keys(h?.domain_distribution||{}).sort((e,o)=>e.localeCompare(o)),[h?.domain_distribution]);return s.jsxs("section",{className:"card relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-orange-400 opacity-70"}),s.jsx("h2",{className:"text-3xl font-bold mb-1",children:"Web Graph Weaver / Web Graph Weaver"}),s.jsx("p",{className:"text-muted mb-5 text-sm",children:"Ethical crawl instrumentation: discover, validate, fetch, parse, and map relationship growth."}),s.jsxs("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-5 mb-4",children:[s.jsxs("div",{className:"mindfuck-card",children:[s.jsx("p",{className:"mindfuck-k",children:"crawl state"}),s.jsx("p",{className:"mindfuck-v capitalize",children:h?.state||"stopped"}),s.jsxs("p",{className:"mindfuck-small",children:["ws ",R]})]}),s.jsxs("div",{className:"mindfuck-card",children:[s.jsx("p",{className:"mindfuck-k",children:"crawl rate"}),s.jsxs("p",{className:"mindfuck-v",children:[h?.metrics?.crawl_rate_nodes_per_sec?.toFixed(2)||"0.00","/s"]}),s.jsxs("p",{className:"mindfuck-small",children:["frontier ",h?.metrics?.frontier_size??0]})]}),s.jsxs("div",{className:"mindfuck-card",children:[s.jsx("p",{className:"mindfuck-k",children:"compliance"}),s.jsxs("p",{className:"mindfuck-v",children:[h?.metrics?.compliance_percent?.toFixed(1)||"0.0","%"]}),s.jsxs("p",{className:"mindfuck-small",children:["robots blocked ",h?.metrics?.robots_blocked??0]})]}),s.jsxs("div",{className:"mindfuck-card",children:[s.jsx("p",{className:"mindfuck-k",children:"graph"}),s.jsx("p",{className:"mindfuck-v",children:h?.graph_counts?.nodes_total??0}),s.jsxs("p",{className:"mindfuck-small",children:["edges ",h?.graph_counts?.edges_total??0]})]}),s.jsxs("div",{className:"mindfuck-card",children:[s.jsx("p",{className:"mindfuck-k",children:"crawler load"}),s.jsx("p",{className:"mindfuck-v",children:h?.metrics?.active_fetchers??0}),s.jsxs("p",{className:"mindfuck-small",children:["avg ",h?.metrics?.average_fetch_ms??0,"ms"]})]})]}),s.jsxs("div",{className:"grid gap-3 xl:grid-cols-[1.7fr_1fr]",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("article",{className:"mindfuck-panel",children:[s.jsxs("div",{className:"grid gap-2 md:grid-cols-2 xl:grid-cols-6",children:[s.jsxs("label",{className:"md:col-span-2 xl:col-span-3",children:[s.jsx("span",{className:"mindfuck-k",children:"Seed URLs (one per line or comma)"}),s.jsx("textarea",{value:$,onChange:t=>Q(t.target.value),className:"mindfuck-input min-h-[72px] mt-1"})]}),s.jsxs("label",{children:[s.jsx("span",{className:"mindfuck-k",children:"max depth"}),s.jsx("input",{type:"number",min:0,max:8,value:P,onChange:t=>ae(Number(t.target.value||0)),className:"mindfuck-input mt-1"})]}),s.jsxs("label",{children:[s.jsx("span",{className:"mindfuck-k",children:"max nodes"}),s.jsx("input",{type:"number",min:100,max:5e4,value:z,onChange:t=>Se(Number(t.target.value||100)),className:"mindfuck-input mt-1"})]}),s.jsxs("label",{children:[s.jsx("span",{className:"mindfuck-k",children:"parallel fetchers"}),s.jsx("input",{type:"number",min:1,max:24,value:ie,onChange:t=>Ee(Number(t.target.value||1)),className:"mindfuck-input mt-1"})]})]}),s.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[s.jsx("button",{type:"button",className:"mindfuck-action-btn",onClick:()=>te("start").catch(t=>X(t)),children:"Start Crawl"}),s.jsx("button",{type:"button",className:"mindfuck-action-btn",onClick:()=>te("pause").catch(t=>X(t)),children:"Pause"}),s.jsx("button",{type:"button",className:"mindfuck-action-btn",onClick:()=>te("resume").catch(t=>X(t)),children:"Resume"}),s.jsx("button",{type:"button",className:"mindfuck-action-btn",onClick:()=>te("stop").catch(t=>X(t)),children:"Stop"}),s.jsx("button",{type:"button",className:"mindfuck-action-btn",onClick:()=>oe().catch(t=>X(t)),children:"Refresh"})]}),s.jsxs("div",{className:"mt-3 grid gap-2 md:grid-cols-[1fr_auto]",children:[s.jsxs("div",{children:[s.jsx("span",{className:"mindfuck-k",children:"Opt-out domain"}),s.jsx("input",{value:ce,onChange:t=>fe(t.target.value),placeholder:"example.com",className:"mindfuck-input mt-1"})]}),s.jsx("button",{type:"button",className:"mindfuck-action-btn self-end",onClick:()=>De().catch(t=>X(t)),children:"Add Opt-Out"})]}),s.jsxs("p",{className:"mindfuck-small mt-2",children:["user-agent: ",h?.user_agent||"(loading)"]}),s.jsxs("p",{className:"mindfuck-small",children:["endpoint: ",re]}),pe&&s.jsx("p",{className:"text-xs text-[#f92672] mt-2",children:pe})]}),s.jsxs("article",{className:"mindfuck-panel",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-2",children:[s.jsx("p",{className:"mindfuck-subhead mb-0",children:"Graph View"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"mindfuck-small",children:"domain filter"}),s.jsxs("select",{value:O,onChange:t=>Me(t.target.value),className:"mindfuck-input !py-1 !px-2",children:[s.jsx("option",{value:"",children:"(all domains)"}),Ie.map(t=>s.jsx("option",{value:t,children:t},t))]})]})]}),s.jsxs("div",{className:"relative rounded-xl overflow-hidden border border-[rgba(102,217,239,0.38)] bg-[rgba(24,25,20,0.96)]",children:[s.jsx("canvas",{ref:n,className:"block w-full h-[420px]"}),s.jsx("div",{className:"absolute top-2 left-2 text-[10px] text-[#66d9ef] bg-[rgba(31,32,29,0.78)] px-2 py-1 rounded",children:"wheel = zoom, drag = pan, click node = highlight path"})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("article",{className:"mindfuck-panel",children:[s.jsx("h3",{className:"mindfuck-subhead",children:"Crawl Status"}),s.jsxs("ul",{className:"space-y-1.5 text-xs text-ink",children:[s.jsxs("li",{children:["- discovered: ",h?.metrics?.discovered??0]}),s.jsxs("li",{children:["- fetched: ",h?.metrics?.fetched??0]}),s.jsxs("li",{children:["- skipped: ",h?.metrics?.skipped??0]}),s.jsxs("li",{children:["- robots blocked: ",h?.metrics?.robots_blocked??0]}),s.jsxs("li",{children:["- duplicate content: ",h?.metrics?.duplicate_content??0]}),s.jsxs("li",{children:["- errors: ",h?.metrics?.errors??0]})]}),s.jsxs("div",{className:"mt-3",children:[s.jsx("p",{className:"mindfuck-k",children:"active domains"}),s.jsx("p",{className:"mindfuck-small",children:(h?.active_domains??[]).slice(0,6).join(", ")||"(none)"})]}),s.jsxs("div",{className:"mt-3",children:[s.jsx("p",{className:"mindfuck-k",children:"opt-out list"}),s.jsx("p",{className:"mindfuck-small",children:(h?.opt_out_domains??[]).join(", ")||"(none)"})]})]}),s.jsxs("article",{className:"mindfuck-panel",children:[s.jsx("h3",{className:"mindfuck-subhead",children:"Domain Distribution"}),s.jsx("div",{className:"space-y-1 max-h-[150px] overflow-auto pr-1",children:Object.entries(h?.domain_distribution||{}).sort((t,e)=>e[1]-t[1]).slice(0,10).map(([t,e])=>s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"truncate mr-2",style:{color:je(t)},children:t}),s.jsx("span",{className:"font-mono text-[#e6db74]",children:e})]},t))}),s.jsx("h3",{className:"mindfuck-subhead mt-3",children:"Depth Histogram"}),s.jsx("div",{className:"space-y-1",children:Object.entries(h?.depth_histogram||{}).sort((t,e)=>Number(t[0])-Number(e[0])).map(([t,e])=>s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("span",{className:"text-muted",children:["depth ",t]}),s.jsx("span",{className:"font-mono text-[#e6db74]",children:e})]},t))})]}),s.jsxs("article",{className:"mindfuck-panel",children:[s.jsx("h3",{className:"mindfuck-subhead",children:"Event Stream"}),s.jsx("div",{className:"mindfuck-table-wrap max-h-[300px]",children:s.jsxs("table",{className:"mindfuck-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"ts"}),s.jsx("th",{children:"event"}),s.jsx("th",{children:"target"})]})}),s.jsx("tbody",{children:[...k].slice(-120).reverse().map((t,e)=>s.jsxs("tr",{children:[s.jsx("td",{className:"font-mono",children:new Date(t.timestamp).toLocaleTimeString()}),s.jsx("td",{children:t.event}),s.jsx("td",{className:"font-mono",children:Ye(qe(t),88)})]},`${t.timestamp}-${t.event}-${e}`))})]})})]})]})]})]})}function Be(n,i,u){return Math.max(i,Math.min(u,n))}export{Ue as WebGraphWeaverPanel};
