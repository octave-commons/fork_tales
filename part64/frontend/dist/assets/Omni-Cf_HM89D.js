import{r as i,j as s}from"./index-DAODguMZ.js";function o({catalog:t}){const[r,n]=i.useState([]);return i.useEffect(()=>{const e=async()=>{try{const m=window.location.port==="5173"?"http://127.0.0.1:8787":"",l=await fetch(`${m}/api/memories`);if(l.ok){const d=await l.json();n(d.memories||[])}}catch{}};e();const a=setInterval(e,1e4);return()=>clearInterval(a)},[]),!t||!t.cover_fields?null:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(220px,1fr))] gap-3 mt-3",children:t.cover_fields.map(e=>s.jsxs("article",{className:"border border-[var(--line)] rounded-xl p-3 bg-gradient-to-b from-[rgba(45,46,39,0.9)] to-[rgba(31,32,29,0.94)]",children:[s.jsxs("div",{className:"flex justify-between items-baseline mb-2",children:[s.jsx("strong",{className:"text-sm font-semibold",children:e.display_name.en}),s.jsx("span",{className:"text-xs text-muted",children:e.display_name.ja})]}),s.jsx("img",{src:e.url,alt:e.display_name.en,className:"w-full rounded-lg block",loading:"lazy"}),s.jsxs("p",{className:"text-xs text-muted mt-2",children:["Part ",e.part]})]},e.id))}),r.length>0&&s.jsxs("div",{className:"card !mt-6 bg-[rgba(166,226,46,0.12)] border-[rgba(166,226,46,0.36)]",children:[s.jsx("h4",{className:"text-sm font-bold mb-2 text-[#a6e22e]",children:"Memory Fragments / 記憶の断片 (Echoes)"}),s.jsx("div",{className:"space-y-2",children:r.map((e,a)=>s.jsxs("div",{className:"text-xs border-l-2 border-[rgba(166,226,46,0.5)] pl-2 py-1",children:[s.jsxs("span",{className:"text-muted block font-mono",children:["[",e.metadata?.timestamp||"???","]"]}),e.text]},e.id||a))})]})]})}export{o as OmniPanel};
